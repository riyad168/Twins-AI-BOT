<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TWINS TRADING COMMUNITY</title>
<style>
  body {
    background: rgb(10, 26, 47);
    color: rgb(208, 215, 222);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 40px 20px;
    min-height: 100vh;
  }
  .wrapper {
    max-width: 420px;
    width: 100%;
  }
  @keyframes fadeScaleIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  @keyframes rgbBorderShift {
    0% { border-color: rgb(0, 255, 209); }
    25% { border-color: rgb(255, 0, 128); }
    50% { border-color: rgb(128, 0, 255); }
    75% { border-color: rgb(0, 128, 255); }
    100% { border-color: rgb(0, 255, 209); }
  }
  #loginBox {
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 8px 25px rgba(0, 255, 150, 0.3);
    text-align: center;
    animation: fadeScaleIn 0.5s ease forwards, rgbBorderShift 8s linear infinite;
    border: 3px solid;
    border-image-slice: 1;
    background: rgba(0 0 0 / 0.25);
    color: #d0d7de;
  }
  #loginBox h1 {
    margin-bottom: 20px;
    color: white;
    text-shadow: 0 0 5px #000;
  }
  #loginBox input {
    width: 100%;
    padding: 12px 14px;
    margin: 10px 0;
    border-radius: 12px;
    border: none;
    font-size: 1rem;
    outline: none;
    background: rgba(255 255 255 / 0.1);
    color: white;
    transition: background 0.3s ease;
  }
  #loginBox input::placeholder {
    color: rgba(255 255 255 / 0.6);
  }
  #loginBox input:focus {
    background: rgba(255 255 255 / 0.25);
  }
  #loginBox button {
    width: 100%;
    padding: 14px;
    border-radius: 15px;
    border: none;
    background: rgba(255 255 255 / 0.9);
    color: rgb(0, 33, 26);
    font-weight: 700;
    cursor: pointer;
    margin-top: 15px;
    box-shadow: 0 6px 15px rgba(255 255 255 / 0.6);
    transition: background 0.3s ease, transform 0.2s ease;
  }
  #loginBox button:hover {
    background: rgba(255 255 255 / 1);
    transform: scale(1.05);
  }
  #errorMsg {
    color: rgb(255, 85, 85);
    margin-top: 10px;
    min-height: 20px;
  }
  #app {
    display: none;
  }
  /* নিচের অংশে আগের কোডের বাকি CSS থাকবে */
  /* ... */

  /* Config box */
  .config-box {
    border-radius: 20px;
    padding: 25px 30px;
    margin-bottom: 30px;
    box-shadow: 0 8px 25px rgba(0, 255, 150, 0.3);
    animation: fadeScaleIn 0.5s ease forwards, rgbBorderShift 8s linear infinite;
    border: 3px solid;
    border-image-slice: 1;
    background: rgba(0 0 0 / 0.25);
    color: white;
  }
  .config-box h1 {
    font-weight: 700;
    font-size: 1.7rem;
    margin-bottom: 8px;
    text-align: center;
    text-shadow: 0 0 5px #000;
  }
  label {
    display: block;
    margin-top: 15px;
    font-weight: 600;
    font-size: 0.9rem;
    color: rgba(255 255 255 / 0.85);
  }
  select, button#generateBtn {
    width: 100%;
    padding: 12px 14px;
    margin-top: 6px;
    border-radius: 12px;
    border: none;
    font-size: 1rem;
    background: rgba(255 255 255 / 0.1);
    color: white;
    cursor: pointer;
    outline: none;
    transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
    box-shadow: inset 0 0 5px rgba(255 255 255 / 0.3);
  }
  select:hover, select:focus {
    background: rgba(255 255 255 / 0.25);
    transform: scale(1.02);
    box-shadow: inset 0 0 8px rgba(255 255 255 / 0.6);
  }
  button#generateBtn {
    margin-top: 20px;
    background: rgba(255 255 255 / 0.9);
    color: rgb(0, 33, 26);
    font-weight: 700;
    box-shadow: 0 6px 15px rgba(255 255 255 / 0.6);
  }
  button#generateBtn:hover {
    background: rgba(255 255 255 / 1);
    transform: scale(1.05);
    box-shadow: 0 8px 20px rgba(255 255 255 / 0.9);
  }
  #logoutBtn {
    width: 100%;
    padding: 10px;
    margin-bottom: 20px;
    border-radius: 12px;
    border: 3px solid;
    font-weight: 700;
    cursor: pointer;
    animation: rgbBorderShift 8s linear infinite, fadeScaleIn 0.5s ease forwards;
    background: rgba(255 255 255 / 0.9);
    color: rgb(0, 33, 26);
    box-shadow: 0 4px 12px rgba(255 255 255 / 0.7);
    transition: background 0.3s ease, transform 0.2s ease;
  }
  #logoutBtn:hover {
    background: rgba(255 255 255 / 1);
    transform: scale(1.05);
    box-shadow: 0 6px 18px rgba(255 255 255 / 0.9);
  }
  .progress-box {
    border-radius: 18px;
    padding: 20px 25px;
    margin-bottom: 25px;
    font-size: 1rem;
    line-height: 1.4;
    display: none;
    animation: fadeScaleIn 0.5s ease forwards, rgbBorderShift 8s linear infinite;
    border: 3px solid;
    border-image-slice: 1;
    background: rgba(0 0 0 / 0.25);
    box-shadow: 0 6px 15px rgba(0 255 209 / 0.6);
    color: white;
  }
  .progress-box.show {
    display: block;
  }
  .progress-line {
    margin-top: 6px;
    font-weight: 600;
  }
  .progress-percent {
    font-weight: 700;
    color: white;
  }
  .progress-bar-container {
    width: 100%;
    background: rgba(0 0 0 / 0.25);
    border-radius: 12px;
    overflow: hidden;
    margin-top: 6px;
    height: 16px;
    box-shadow: inset 0 0 8px rgba(255 255 255 / 0.3);
  }
  .progress-bar {
    height: 16px;
    width: 0%;
    background: linear-gradient(90deg, rgb(0, 255, 209), rgb(0, 204, 170));
    border-radius: 12px;
    transition: width 0.3s ease;
  }
  .result-box {
    border-radius: 18px;
    padding: 25px 30px;
    font-size: 1rem;
    line-height: 1.4;
    display: none;
    animation: fadeScaleIn 0.5s ease forwards, rgbBorderShift 8s linear infinite;
    border: 3px solid;
    border-image-slice: 1;
    background: rgba(0 0 0 / 0.25);
    color: white;
    box-shadow: 0 8px 20px rgba(0 255 209 / 0.6);
  }
  .result-box.show {
    display: block;
  }
  .direction-up {
    color: rgb(50, 205, 50);
    font-weight: 700;
    font-size: 1.2rem;
  }
  .direction-down {
    color: rgb(255, 77, 77);
    font-weight: 700;
    font-size: 1.2rem;
  }
  .tip {
    text-align: center;
    font-size: 0.9rem;
    color: rgba(255 255 255 / 0.85);
    font-style: italic;
    margin-top: 18px;
    padding: 10px 15px;
    border-radius: 15px;
    border: 3px solid;
    background: rgba(0 0 0 / 0.25);
    max-width: 380px;
    margin-left: auto;
    margin-right: auto;
    box-shadow: 0 0 10px rgba(255 255 255 / 0.2);
    border-image-slice: 1;
    border-image-source: linear-gradient(90deg, rgb(0, 255, 209), rgb(255, 0, 128), rgb(128, 0, 255), rgb(0, 128, 255), rgb(0, 255, 209));
    animation: rgbBorderShift 8s linear infinite;
  }
    /* === Grid Lines === */
  .background-grid {
    position: fixed;
    inset: 0;
    opacity: 0.15;
    z-index: 0;
    background-image:
      linear-gradient(rgba(34, 211, 238, 0.2) 1px, transparent 1px),
      linear-gradient(90deg, rgba(34, 211, 238, 0.2) 1px, transparent 1px);
    background-size: 50px 50px;
    filter: drop-shadow(0 0 10px rgba(34, 211, 238, 0.2));
    pointer-events: none;
  }

  /* === Pulsing Blobs === */
  .blob {
    position: fixed;
    border-radius: 50%;
    filter: blur(80px);
    z-index: 0;
    animation: pulseBlob 6s infinite ease-in-out alternate;
    pointer-events: none;
  }

  .blob1 {
    width: 350px;
    height: 350px;
    background: rgba(34, 211, 238, 0.3);
    top: 20%;
    left: 10%;
  }

  .blob2 {
    width: 400px;
    height: 400px;
    background: rgba(168, 85, 247, 0.3);
    bottom: 15%;
    right: 15%;
    animation-delay: 2s;
  }

  @keyframes pulseBlob {
    0% { transform: scale(1); opacity: 0.6; }
    100% { transform: scale(1.2); opacity: 0.3; }
  }

  /* === Floating Particles === */
  .particle {
    position: fixed;
    border-radius: 50%;
    z-index: 0;
    pointer-events: none;
  }
    .candlestick {
    position: fixed;
    bottom: 0;
    width: 6px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 2px;
    animation: floatCandle 6s linear infinite;
    z-index: 0;
    opacity: 0.5;
  }

  .candlestick::before {
    content: "";
    position: absolute;
    left: 2px;
    width: 2px;
    background: rgba(255, 255, 255, 0.4);
    top: -20px;
    bottom: -20px;
  }

  @keyframes floatCandle {
    0% {
      transform: translateY(100vh) scaleY(1);
      opacity: 0;
    }
    50% {
      opacity: 0.6;
    }
    100% {
      transform: translateY(-30vh) scaleY(1.2);
      opacity: 0;
    }
  }

  
</style>
</head>
<div id="popupModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:999; justify-content:center; align-items:center;">
  <div style="background:#111; padding:30px; border-radius:15px; color:#fff; max-width:300px; text-align:center; box-shadow:0 0 15px #0ff;">
    <p>🕒 New signal will be ready in:</p>
    <h2 id="countdownTimer">00:00</h2>
    <button onclick="closeModal()" style="margin-top:15px; padding:8px 20px; border:none; border-radius:10px; background:#0ff; color:#000; font-weight:bold; cursor:pointer;">Close</button>
  </div>
</div>

<body>

<audio id="clickSound" src="https://assets.mixkit.co/sfx/preview/mixkit-interface-click-1126.mp3"></audio>

<div id="candle-container"></div>

   <!-- Grid Background -->
<div class="background-grid"></div>

<!-- Blobs -->
<div class="blob blob1"></div>
<div class="blob blob2"></div>

<!-- Particle Container -->
<div id="particle-container"></div>

  <div class="wrapper">
  <div id="loginBox">
    <img src="https://i.postimg.cc/1z91FWtk/S-1.png" alt="Logo" style="max-width: 120px; margin-bottom: 15px;" />

    <h1>QxProfitBot Login</h1>
    <input type="text" id="username" placeholder="Username" />
    <input type="password" id="password" placeholder="Password" />
    <input type="text" id="licenseKey" placeholder="License Key" />
    <button id="loginBtn">Login</button>
    <div id="errorMsg"></div>
  </div>

  <div id="app">
    <button id="logoutBtn">Logout</button>
    <div class="config-box">
      <h1>QxProfitBot</h1>
      <label for="broker">SELECT BROKER</label>
      <select id="broker"><option>Quotex</option></select>
      <label for="asset">SELECT ASSET</label>
      <select id="asset"><option>NZD/CAD (OTC)</option><option>USD/CHF (OTC)</option><OPtion>USD/BRL (OTC)</OPtion><option>USD/ARS (OTC)</option><OPtion>USD/INR (OTC)</OPtion><OPtion>USD/PKR (OTC)</OPtion><option>USD/MXN (OTC)</option></select>
      <label for="timeframe">SELECT TIMEFRAME</label>
      <select id="timeframe"><option>1 minute</option><option>5 minutes</option><option>15 minutes</option></select>
      <button id="generateBtn">GENERATE AI SIGNAL</button>
    </div>

    <div class="progress-box" id="progressBox">
      <p>Generating trading signals...</p>
      <p class="progress-line">Overall Progress <span class="progress-percent" id="overallProgress">0%</span></p>
      <div class="progress-bar-container"><div class="progress-bar" id="overallProgressBar"></div></div>
      <p class="progress-line">Current Step <span class="progress-percent" id="currentStep">0%</span></p>
      <div class="progress-bar-container"><div class="progress-bar" id="currentStepBar"></div></div>
      <p>Processing</p>
    </div>

    <div class="result-box" id="resultBox">
      <p><b>Generated Signal</b></p>
      <p><b>Asset:</b> <span id="resAsset">-</span></p>
      <p><b>Direction:</b> <span id="resDirection">-</span></p>
      <p><b>Confidence:</b> <span id="resConfidence">--%</span></p>
      <p><b>Timeframe:</b> <span id="resTimeframe">--</span></p>
      <p><b>Generated:</b> <span id="resGeneratedTime">--:--:--</span></p>
      <p><b>Signal Strength:</b> <span id="resStrength">--%</span></p>
    </div>
    <p class="tip">💡 Tip: Click on GENERATE AI SIGNAL:</p>
    <P class="tip">Riyad khan</P>

  <div style="text-align:center; margin-top: 15px;">
  <a href="https://t.me/YourTelegramChannel" target="_blank" style="
    display: inline-block;
    padding: 12px 24px;
    background: linear-gradient(90deg, #00f2ea, #0088cc);
    color: white;
    font-weight: bold;
    text-decoration: none;
    border-radius: 30px;
    box-shadow: 0 4px 15px rgba(0, 242, 234, 0.4);
    transition: transform 0.2s ease;
  " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
    👉 Join Our Telegram
  </a>
</div>
  
  </div>
</div>

<script>
  const LICENSE_API_URL = 'https://script.google.com/macros/s/AKfycbyFQQJGppIMkrzL1L-uv_XJUki8LmV-e_OmU8GxhCYP4MNFF1LSNYBZ6IVijdaxj3dttw/exec';
  const deviceId = (()=>{
    let d = localStorage.getItem('device_id');
    if (!d) {
      d = 'dev-' + Math.random().toString(36).substr(2,16);
      localStorage.setItem('device_id', d);
    }
    return d;
  })();

  const loginBox = document.getElementById('loginBox');
  const app = document.getElementById('app');
  const errorMsg = document.getElementById('errorMsg');
  const loginBtn = document.getElementById('loginBtn');
  const logoutBtn = document.getElementById('logoutBtn');
  const generateBtn = document.getElementById('generateBtn');
  const progressBox = document.getElementById('progressBox');
  const resultBox = document.getElementById('resultBox');
  const overallProgressEl = document.getElementById('overallProgress');
  const currentStepEl = document.getElementById('currentStep');
  const overallProgressBar = document.getElementById('overallProgressBar');
  const currentStepBar = document.getElementById('currentStepBar');
  const resAsset = document.getElementById('resAsset');
  const resDirection = document.getElementById('resDirection');
  const resConfidence = document.getElementById('resConfidence');
  const resTimeframe = document.getElementById('resTimeframe');
  const resGeneratedTime = document.getElementById('resGeneratedTime');
  const resStrength = document.getElementById('resStrength');

  function showLogin(){ loginBox.style.display='block'; app.style.display='none'; errorMsg.textContent='';}
  function showApp(){ loginBox.style.display='none'; app.style.display='block'; hideProgressAndResult();}
  function hideProgressAndResult(){ progressBox.style.display='none'; resultBox.style.display='none';}

  window.onload = ()=>{
    if(localStorage.getItem('loggedIn')==='true') showApp();
    else showLogin();
  };

  loginBtn.addEventListener('click', async ()=>{
    const u = document.getElementById('username').value.trim(),
          p = document.getElementById('password').value.trim(),
          k = document.getElementById('licenseKey').value.trim();
    if(!u||!p||!k){ errorMsg.textContent='All fields are required'; return; }

    try {
      const res = await fetch(`${LICENSE_API_URL}?username=${encodeURIComponent(u)}&password=${encodeURIComponent(p)}&licenseKey=${encodeURIComponent(k)}&deviceId=${encodeURIComponent(deviceId)}`);
      const data = await res.json();
      if(data.success){
        localStorage.setItem('loggedIn','true');
        errorMsg.textContent = '';
        showApp();
      } else {
        errorMsg.textContent = data.message;
      }
    } catch(e){
      console.error(e);
      errorMsg.textContent='Server error. Try later.';
    }
  });

  logoutBtn.addEventListener('click', ()=>{ localStorage.removeItem('loggedIn'); showLogin(); });

  generateBtn.addEventListener('click', () => {
  const now = new Date();
  const roundedKey = new Date(
    now.getFullYear(),
    now.getMonth(),
    now.getDate(),
    now.getHours(),
    Math.floor(now.getMinutes() / 3) * 3,
    0
  ).toISOString().slice(0, 16); // ক্যাশ চাবি

  const key = 'signal_' + roundedKey;
  const signalData = localStorage.getItem(key);

  if (signalData) {
    const nextAvailable = new Date(
      now.getFullYear(),
      now.getMonth(),
      now.getDate(),
      now.getHours(),
      Math.floor(now.getMinutes() / 3) * 3 + 3,
      0
    );
    const diffMs = nextAvailable - now;
    if (diffMs > 0) {
      startCountdown(diffMs);
      return;
    }
  }

  // যদি আগের signal না থাকে, তাহলে proceed
  hideProgressAndResult();
  progressBox.style.display = 'block';
  let overall = 0, step = 0;
  const interval = setInterval(() => {
    if (overall < 86) overall++;
    if (step < 100) step = Math.min(step + 2, 100);
    overallProgressEl.textContent = overall + '%';
    currentStepEl.textContent = step + '%';
    overallProgressBar.style.width = overall + '%';
    currentStepBar.style.width = step + '%';
    if (overall >= 86 && step === 100) {
      clearInterval(interval);
      progressBox.style.display = 'none';
      showSignalResult();
    }
  }, 80);
});

  function showSignalResult() {
  const asset = document.getElementById('asset').value;
  const timeframe = document.getElementById('timeframe').value;
  

  const now = new Date();

  // 👉 রাউন্ড করে পরের ১ মিনিটে নিয়ে যাও, সেকেন্ড ০০ করে
  const futureTime = new Date(
    now.getFullYear(),
    now.getMonth(),
    now.getDate(),
    now.getHours(),
    now.getMinutes() + 1, // কারেন্ট মিনিট +১
    0, // সেকেন্ড ০০
    0
  );

  const roundedKey = new Date(
    now.getFullYear(),
    now.getMonth(),
    now.getDate(),
    now.getHours(),
    Math.floor(now.getMinutes() / 3) * 3,
    0
  ).toISOString().slice(0, 16); // 3 মিনিট ক্যাশের জন্য

  const key = 'signal_' + roundedKey;
  let signalData = JSON.parse(localStorage.getItem(key));

  if (!signalData) {
    const direction = Math.random() > 0.5 ? 'UP' : 'DOWN';
    const confidence = Math.floor(Math.random() * 10) + 85;
    signalData = {
      asset,
      timeframe,
      direction,
      confidence,
      generatedTime: futureTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' })
    };
    localStorage.setItem(key, JSON.stringify(signalData));
  }

  resAsset.textContent = signalData.asset;
  resDirection.textContent = signalData.direction;
  resDirection.className = signalData.direction === 'UP' ? 'direction-up' : 'direction-down';
  resConfidence.textContent = signalData.confidence + '%';
  resStrength.textContent = signalData.confidence + '%';
  resTimeframe.textContent = signalData.timeframe;
  resGeneratedTime.textContent = signalData.generatedTime;
  resultBox.style.display = 'block';
  // 🔊 Speak signal result
   speakSignal(signalData.asset, signalData.timeframe, signalData.direction, signalData.confidence);
}
function startCountdown(ms) {
  const modal = document.getElementById('popupModal');
  const timer = document.getElementById('countdownTimer');
  modal.style.display = 'flex';

  let remaining = ms;

  const countdown = setInterval(() => {
    const minutes = Math.floor(remaining / 60000);
    const seconds = Math.floor((remaining % 60000) / 1000);
    timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    remaining -= 1000;
    if (remaining <= 0) {
      clearInterval(countdown);
      modal.style.display = 'none';
    }
  }, 1000);
}

function closeModal() {
  document.getElementById('popupModal').style.display = 'none';
}
 const particleContainer = document.getElementById("particle-container");
  let particles = [];

  function createParticle() {
    const colors = ["#22d3ee", "#a855f7", "#ec4899", "#10b981", "#f59e0b", "#8b5cf6"];
    return {
      id: `p-${Date.now()}-${Math.random()}`,
      x: Math.random() * window.innerWidth,
      y: window.innerHeight + 10,
      size: Math.random() * 4 + 2,
      color: colors[Math.floor(Math.random() * colors.length)],
      speed: Math.random() * 1.5 + 0.5,
      opacity: 1
    };
  }

  function updateParticles() {
    // Remove off-screen particles
    particles = particles.filter(p => p.y > -10 && p.opacity > 0.05);

    // Add new ones
    if (Math.random() > 0.7 && particles.length < 25) {
      particles.push(createParticle());
    }

    // Clear container
    particleContainer.innerHTML = "";

    // Update and draw
    particles = particles.map(p => {
      p.y -= p.speed;
      p.opacity -= 0.006;

      const el = document.createElement("div");
      el.className = "particle";
      el.style.left = `${p.x}px`;
      el.style.top = `${p.y}px`;
      el.style.width = `${p.size}px`;
      el.style.height = `${p.size}px`;
      el.style.backgroundColor = p.color;
      el.style.opacity = p.opacity;
      particleContainer.appendChild(el);

      return p;
    });
  }

  setInterval(updateParticles, 60);

const candleContainer = document.getElementById("candle-container");

  function createCandles(count = 20) {
    for (let i = 0; i < count; i++) {
      const candle = document.createElement("div");
      candle.className = "candlestick";

      const height = 30 + Math.random() * 60;
      candle.style.height = height + "px";
      candle.style.left = Math.random() * window.innerWidth + "px";
      candle.style.animationDuration = 4 + Math.random() * 3 + "s";
      candle.style.background = Math.random() > 0.5
        ? "rgba(0,255,150,0.3)"   // greenish candle
        : "rgba(255,50,100,0.3)"; // reddish candle

      candleContainer.appendChild(candle);
    }
  }

  createCandles();  

function speakSignal(asset, timeframe, direction, confidence) {
  const msg = new SpeechSynthesisUtterance();

  const dirText = direction === 'UP' ? 'Up' : 'Down';

  msg.text = `The trading signal for ${asset} on ${timeframe} timeframe is ${dirText}, with confidence level of ${confidence} percent.`;

  msg.lang = 'en-US';       // ইংরেজি ভাষা
  msg.pitch = 1.2;          // একটু উচ্চস্বরে, নারীর কণ্ঠস্বরের মত
  msg.rate = 0.95;          // বাচকত্বের গতি
  msg.volume = 1;           // সম্পূর্ণ ভলিউম

  const voices = speechSynthesis.getVoices();
  const femaleVoice = voices.find(v =>
    v.lang === 'en-US' && (
      v.name.toLowerCase().includes('female') ||
      v.name.toLowerCase().includes('samantha') ||
      v.name.toLowerCase().includes('zoe') ||
      v.name.toLowerCase().includes('zira')
    )
  );

  if (femaleVoice) {
    msg.voice = femaleVoice;
  } else {
    msg.voice = voices.find(v => v.lang.startsWith('en')) || null;
  }

  speechSynthesis.speak(msg);
}
document.querySelectorAll("button").forEach(btn => {
  btn.addEventListener("click", () => {
    document.getElementById("clickSound").play();
  });
});
 

</script>
</body>
</html>
